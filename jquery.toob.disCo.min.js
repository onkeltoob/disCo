(function(e){e.extend(e.fn,{disCo:function(t){var n=e.extend({userAttributeName:"user",folder:0,sort:"added",sortOrder:"desc",results:"10",resultElementClass:"records",resultElementId:"",headerId:"ID",headerArtists:"Artists",headerTitle:"Title",headerLabels:"Labels",headerStyles:"Styles",headerYear:"Year",noReleasesNote:"No releases could be found."},t);n.userAttributeName=!/^data\-(.)+$/.test(n.userAttributeName)?"data-"+n.userAttributeName:n.userAttributeName;this.each(function(){var t=e(this);e.getJSON("http://api.discogs.com/users/"+e(this).attr(n.userAttributeName)+"/collection/folders/"+n.folder+"/releases?"+"per_page="+n.results+"&sort="+n.sort+"&sort_order="+n.sortOrder+"&callback=?",function(r){if(r.data.releases.length>0){var i=e(document.createElement("table"));if(n.resultElementClass){i.addClass(n.resultElementClass)}if(n.resultElementId){i.attr("id",n.resultElementId)}i.append("<tr><th>"+n.headerId+"</th><th>"+n.headerArtists+"</th><th>"+n.headerTitle+"</th><th>"+n.headerLabels+"</th><th>"+n.headerStyles+"</th><th>"+n.headerYear+"</th></tr>");e.each(r.data.releases,function(){var t=this;e.ajax({type:"GET",url:t.basic_information.resource_url+"?callback=?",processData:true,data:{},dataType:"json",success:function(n){i.append("<tr><td>"+'<a href="'+n.data.uri+'" title="'+t.basic_information.title+' @ Discogs">'+t.id+"</a></td><td>"+e.map(t.basic_information.artists,function(e){return e.name}).join(", ")+"</td><td>"+t.basic_information.title+"</td><td>"+e.map(t.basic_information.labels,function(e){return e.name}).join(", ")+"</td><td>"+n.data.styles.join(", ")+"</td><td>"+t.basic_information.year+"</td></tr>")}})});t.append(i)}else{t.append("<p>"+n.noReleasesNote+"</p>")}})});return this}})})(jQuery)

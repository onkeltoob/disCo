(function(e){e.extend(e.fn,{disCo:function(t){var n=e.extend({userAttributeName:"user",collectionAttributeName:"collection",folder:0,sort:"added",sortOrder:"desc",results:"10",resultElementClass:"records",resultElementId:"",headerId:"ID",headerArtists:"Artists",headerTitle:"Title",headerLabels:"Labels",headerStyles:"Styles",headerYear:"Year",noReleasesNote:"No releases could be found."},t);n.userAttributeName=!/^data\-(.)+$/.test(n.userAttributeName)?"data-"+n.userAttributeName:n.userAttributeName;n.collectionAttributeName=!/^data\-(.)+$/.test(n.collectionAttributeName)?"data-"+n.collectionAttributeName:n.collectionAttributeName;this.each(function(){var t=e(this);var r="http://api.discogs.com/users/"+t.attr(n.userAttributeName)+"/{folder}"+"?per_page="+n.results+"&sort="+n.sort+"&sort_order="+n.sortOrder+"&callback=?";var i=!(t.attr(n.collectionAttributeName)=="wantlist");if(i){r=r.replace("{folder}","collection/folders/"+n.folder+"/releases")}else{r=r.replace("{folder}","wants")}e.getJSON(r,function(r){var s=i?r.data.releases:r.data.wants;if(s.length>0){var o=e(document.createElement("table"));if(n.resultElementClass){o.addClass(n.resultElementClass)}if(n.resultElementId){o.attr("id",n.resultElementId)}o.append("<tr><th>"+n.headerId+"</th><th>"+n.headerArtists+"</th><th>"+n.headerTitle+"</th><th>"+n.headerLabels+"</th><th>"+n.headerStyles+"</th><th>"+n.headerYear+"</th></tr>");e.each(s,function(){var t=this;e.ajax({type:"GET",url:t.basic_information.resource_url+"?callback=?",processData:true,data:{},dataType:"json",success:function(n){o.append("<tr><td>"+'<a href="'+n.data.uri+'" title="'+t.basic_information.title+' @ Discogs">'+t.id+"</a></td><td>"+e.map(t.basic_information.artists,function(e){return e.name}).join(", ")+"</td><td>"+t.basic_information.title+"</td><td>"+e.map(t.basic_information.labels,function(e){return e.name}).join(", ")+"</td><td>"+n.data.styles.join(", ")+"</td><td>"+(t.basic_information.year!=0?t.basic_information.year:"-")+"</td></tr>")}})});t.append(o)}else{t.append("<p>"+n.noReleasesNote+"</p>")}})});return this}})})(jQuery)

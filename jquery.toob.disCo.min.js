(function(e){e.fn.disCo=function(t){var n=e.extend({user:"",folder:0,sort:"added",sortOrder:"desc",results:"10",tableClass:"records",headerId:"ID",headerArtists:"Artists",headerTitle:"Title",headerLabels:"Labels",headerStyles:"Styles",headerYear:"Year",noReleasesNote:"No releases could be found."},t);var r=this;e.getJSON("http://api.discogs.com/users/"+n.user+"/collection/folders/"+n.folder+"/releases?"+"per_page="+n.results+"&sort="+n.sort+"&sort_order="+n.sortOrder+"&callback=?",function(t){if(t.data.releases.length>0){r.append('<table id="records" class="'+n.tableClass+'"><tr><th>'+n.headerId+"</th><th>"+n.headerArtists+"</th><th>"+n.headerTitle+"</th><th>"+n.headerLabels+"</th><th>"+n.headerStyles+"</th><th>"+n.headerYear+"</th></tr>"+"</table>");e.each(t.data.releases,function(){var t=this;var n=e.map(t.basic_information.artists,function(e){return e.name}).join(", ");var r=e.map(t.basic_information.labels,function(e){return e.name}).join(", ");e.ajax({type:"GET",url:t.basic_information.resource_url+"?callback=?",processData:true,data:{},dataType:"json",success:function(i){var s=i.data.styles.join(", ");e("#records").append("<tr><td>"+'<a href="'+i.data.uri+'" title="'+t.basic_information.title+' @ Discogs">'+t.id+"</a></td><td>"+n+"</td><td>"+t.basic_information.title+"</td><td>"+r+"</td><td>"+s+"</td><td>"+t.basic_information.year+"</td></tr>")}})})}else{e("#recordCollection").append("<p>"+n.noReleasesNote+"</p>")}});return r}})(jQuery)
